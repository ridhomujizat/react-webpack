import React from "react";
import "./messageinput.style.scss";

export default function MessageInput(prop) {
  const [attachfile, setAttachFile] = React.useState(false);
  const inputPhoto = React.useRef(null);
  const inputFile = React.useRef(null);

  const onFilechange = (e) => {
    /*Selected files data can be collected here.*/
    console.log(e.target.files);
  };

  return (
    <div className="wgChat-messageinput">
      <input
        type="file"
        name="photo"
        id="upload-photo"
        onChange={onFilechange}
        accept="image/*"
        ref={inputPhoto}
      />
      <input
        type="file"
        name="file"
        id="upload-file"
        onChange={onFilechange}
        ref={inputFile}
      />
      <div className={`attach-sendchat ${attachfile ? "open" : "close"}`}>
        <button onClick={() => setAttachFile(!attachfile)}>
          {attachfile ? (
            <svg
              width="8"
              height="12"
              viewBox="0 0 8 12"
              style={{ width: "10px", margin: "0 5px" }}
            >
              <path
                d="M7.84575 5.68467L0.660416 0.0871726C0.392476 -0.120773 0 0.0667189 0 0.402501V11.5975C0 11.9333 0.392476 12.1208 0.660416 11.9128L7.84575 6.31533C8.05142 6.15511 8.05142 5.84489 7.84575 5.68467Z"
                fill="white"
              />
            </svg>
          ) : (
            <svg width="20" height="20" viewBox="0 0 24 24">
              <path
                d="M12 22C10.4491 22.0376 8.94653 21.4587 7.82179 20.3902C6.69705 19.3217 6.0419 17.8508 6 16.3V6.13C6.02883 5.00891 6.50064 3.9449 7.31216 3.17086C8.12368 2.39683 9.20879 1.97583 10.33 2C11.4529 1.97314 12.5406 2.39295 13.3543 3.16727C14.168 3.94158 14.6412 5.00713 14.67 6.13V16.31C14.6284 16.9886 14.3295 17.6257 13.8343 18.0915C13.3391 18.5573 12.6849 18.8167 12.005 18.8167C11.3251 18.8167 10.6709 18.5573 10.1757 18.0915C9.68047 17.6257 9.38159 16.9886 9.34 16.31V6.92C9.34 6.65478 9.44536 6.40043 9.63289 6.21289C9.82043 6.02536 10.0748 5.92 10.34 5.92C10.6052 5.92 10.8596 6.02536 11.0471 6.21289C11.2346 6.40043 11.34 6.65478 11.34 6.92V16.31C11.3599 16.4723 11.4386 16.6218 11.5611 16.7301C11.6836 16.8385 11.8415 16.8983 12.005 16.8983C12.1685 16.8983 12.3264 16.8385 12.4489 16.7301C12.5714 16.6218 12.6501 16.4723 12.67 16.31V6.13C12.6389 5.53841 12.3758 4.98295 11.9377 4.58417C11.4996 4.1854 10.9219 3.97549 10.33 4C9.73979 3.97818 9.16467 4.1893 8.72876 4.5878C8.29285 4.9863 8.0311 5.54021 8 6.13V16.3C8.04163 17.3204 8.48597 18.2828 9.23569 18.9763C9.98541 19.6698 10.9794 20.0379 12 20C13.0206 20.0379 14.0146 19.6698 14.7643 18.9763C15.514 18.2828 15.9584 17.3204 16 16.3V6.13C16 5.86478 16.1054 5.61043 16.2929 5.42289C16.4804 5.23536 16.7348 5.13 17 5.13C17.2652 5.13 17.5196 5.23536 17.7071 5.42289C17.8946 5.61043 18 5.86478 18 6.13V16.3C17.9581 17.8508 17.303 19.3217 16.1782 20.3902C15.0535 21.4587 13.5509 22.0376 12 22V22Z"
                fill="white"
              />
            </svg>
          )}
        </button>
        {attachfile && (
          <>
            <button onClick={() => inputPhoto.current.click()}>
              <svg width="16" height="14" viewBox="0 0 16 14">
                <path d="M0.0019989 2C0.0019989 1.46957 0.212713 0.960859 0.587785 0.585786C0.962858 0.210714 1.47157 0 2.002 0H14.002C14.5324 0 15.0411 0.210714 15.4162 0.585786C15.7913 0.960859 16.002 1.46957 16.002 2V12C16.002 12.5304 15.7913 13.0391 15.4162 13.4142C15.0411 13.7893 14.5324 14 14.002 14H2.002C1.47157 14 0.962858 13.7893 0.587785 13.4142C0.212713 13.0391 0.0019989 12.5304 0.0019989 12V2V2ZM1.002 11V12C1.002 12.2652 1.10736 12.5196 1.29489 12.7071C1.48243 12.8946 1.73678 13 2.002 13H14.002C14.2672 13 14.5216 12.8946 14.7091 12.7071C14.8966 12.5196 15.002 12.2652 15.002 12V8.5L11.225 6.553C11.1312 6.50602 11.025 6.48973 10.9215 6.50642C10.8179 6.52311 10.7223 6.57194 10.648 6.646L6.938 10.356L4.278 8.584C4.18196 8.52006 4.06676 8.4913 3.95194 8.5026C3.83711 8.5139 3.72973 8.56456 3.648 8.646L1.002 11ZM6.002 4.5C6.002 4.10218 5.84396 3.72064 5.56266 3.43934C5.28135 3.15804 4.89982 3 4.502 3C4.10417 3 3.72264 3.15804 3.44134 3.43934C3.16003 3.72064 3.002 4.10218 3.002 4.5C3.002 4.89782 3.16003 5.27936 3.44134 5.56066C3.72264 5.84196 4.10417 6 4.502 6C4.89982 6 5.28135 5.84196 5.56266 5.56066C5.84396 5.27936 6.002 4.89782 6.002 4.5Z" />
              </svg>
            </button>
            <button onClick={() => inputFile.current.click()}>
              <svg width="12" height="14" viewBox="0 0 12 16">
                <path d="M2 0H7.293C7.5582 5.66374e-05 7.81251 0.105451 8 0.293L11.707 4C11.8945 4.18749 11.9999 4.4418 12 4.707V14C12 14.5304 11.7893 15.0391 11.4142 15.4142C11.0391 15.7893 10.5304 16 10 16H2C1.46957 16 0.960859 15.7893 0.585786 15.4142C0.210714 15.0391 0 14.5304 0 14V2C0 1.46957 0.210714 0.960859 0.585786 0.585786C0.960859 0.210714 1.46957 0 2 0V0ZM7.5 1.5V3.5C7.5 3.76522 7.60536 4.01957 7.79289 4.20711C7.98043 4.39464 8.23478 4.5 8.5 4.5H10.5L7.5 1.5Z" />
              </svg>
            </button>
          </>
        )}
      </div>
      <form
        onSubmit={(e) => {
          e.preventDefault();
          prop.onSendMessage(e.target);
        }}
      >
        <input
          className="input-sendchat"
          type="text"
          value={prop.value}
          placeholder="Ketik Pesan..."
          onFocus={() => attachfile && setAttachFile(!attachfile)}
          onChange={(e) => {
            e.preventDefault();
            prop.onChangeText(e.target.value);
          }}
        />
        <button className="button-sendchat" type="submit">
          <svg viewBox="0 0 32 32">
            <path d="M19.47,31a2,2,0,0,1-1.8-1.09l-4-7.57a1,1,0,0,1,1.77-.93l4,7.57L29,3.06,3,12.49l9.8,5.26,8.32-8.32a1,1,0,0,1,1.42,1.42l-8.85,8.84a1,1,0,0,1-1.17.18L2.09,14.33a2,2,0,0,1,.25-3.72L28.25,1.13a2,2,0,0,1,2.62,2.62L21.39,29.66A2,2,0,0,1,19.61,31Z" />
          </svg>
        </button>
      </form>
    </div>
  );
}
